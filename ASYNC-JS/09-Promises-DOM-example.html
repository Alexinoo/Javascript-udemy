<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Async - Promise - DOM Example</title>
</head>
<style>
    html {
        font-family: 'Jost', sans-serif;
    }

    .container {
        max-width: 40rem;
        height: 8rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);
        margin: 3rem auto;
        padding: 0.5rem;
        background-color: #880017;
        color: white;
        border-radius: 12px;
    }

    .headings {
        margin: 1rem 10rem;
        max-width: 40rem;
        height: auto;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.26);
        margin: 3rem auto;
        padding: 2rem;
        border-radius: 12px;
    }

    .headings h1,
    h2,
    h3 {
        color: #444;
    }

    .title h1 {
        font-size: 24px;
        text-align: center;
        letter-spacing: 1.5px;
        text-transform: capitalize;
    }

    .underline {
        width: 100%;
        height: 3px;
        background-color: #f15025;
    }

    .intro ul li {
        list-style-position: outside;
        margin: 16px 16px;
        font-size: 24px;
    }

    .intro ul li {
        list-style-position: outside;
        margin: 16px 16px;
        font-size: 24px;
    }

    .intro ul li::before {
        content: "\2022";
        color: red;
        font-weight: bold;
        display: inline-block;
        width: 1em;
        margin-left: -1em;
    }

    .intro .basics li span {
        margin-left: 50px;
        list-style-position: inside;
    }

    .btn {
        font-size: 18px;
        text-transform: capitalize;
        margin: 2rem;
        padding: 6px 12px;
        background: #555;
        color: #fff;
        letter-spacing: 1.5px;
        cursor: pointer;
        transition: all 0.3s ease-in-out;
        border-radius: 5px;
    }

    .btn:hover {
        background: #222;
    }

    img {
        width: 100%;
        height: 400px;
        object-fit: cover;
    }
</style>

<body>
    <div class="container">
        <div class="title">
            <h1>ASYNC JS - Promise </h1>
            <div class="underline"></div>
        </div>
        <div class="intro">
            <ul>
                <li>DOM Example</li>
            </ul>
        </div>
        <div class="headings">
            <h1 class="one">Hello world</h1>
            <h1 class="two">Hello people</h1>
            <h1 class="three">Hello JS</h1>          
        </div>
        
        <button class="btn">show people</button>
    </div>

</body>
<script type="text/javascript">
/*
   Promise - DOM EXAMPLE - Chaining .then() Example
   ................................................

    > Change colors of the heading in sequence over a period of time

    > Change h1 color to red in 1 second
    > Change h1 color to green in 2 seconds
    > Change h1 color to green in 1 second

    What if there is no resolve
    -----------------------------

    > Only h1 changes and the nothing else happens because we are not resolving our promise

    What if there one is rejected
    -----------------------------

    > Let's say we use .four class on the first heading instead of .one or if we did not select one of the headings correctly ,the rest of .then() 's are ignored and the catch block is executed


*/

const h1OneElmnt = document.querySelector('.one')
const h1TwoElmnt = document.querySelector('.two')
const h1ThreeElmnt = document.querySelector('.three')
const btnElmnt = document.querySelector('.btn')


btnElmnt.addEventListener('click',()=>{

    // chain.then().then().then().catch()
    addColor(1000, h1OneElmnt, 'red')
    .then(()=>addColor(2000, h1TwoElmnt, 'green'))
    .then(()=>addColor(1000, h1ThreeElmnt, 'blue'))
    .catch(error => console.log(error))
    .finally(()=>console.log('finally block always executed'))
 
})

function addColor(time , element, color){

    return new Promise((resolve,reject)=>{
        if(element){
            setTimeout(()=>{
                element.style.color = color
                resolve()
            },time)
        }else{
            reject(new Error(`There is no such element : ${element}`))
        }
    })

}


</script>

</html>